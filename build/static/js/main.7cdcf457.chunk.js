(this["webpackJsonpprice-manager"]=this["webpackJsonpprice-manager"]||[]).push([[0],{218:function(e,t,a){},232:function(e,t){},234:function(e,t){},245:function(e,t){},247:function(e,t){},274:function(e,t){},276:function(e,t){},277:function(e,t){},282:function(e,t){},284:function(e,t){},303:function(e,t){},315:function(e,t){},318:function(e,t){},340:function(e,t,a){"use strict";a.r(t);var r=a(2),n=a(0),c=a.n(n),i=a(13),o=a.n(i),s=(a(218),a(47)),d=a(39),l=a(51),u=a(49),p=a(7),h=a(199),g=a(17);var j=function(e){var t=e.component,a=Object(h.a)(e,["component"]),n=null!=a.isAuthendicated&&a.isAuthendicated.auth;return Object(r.jsx)(g.b,{render:function(e){return 1==n?Object(r.jsx)(t,Object(p.a)(Object(p.a)({},e),a)):Object(r.jsx)(g.a,{to:"/"})}})},b=a(374),m=a(411),f=a(378),O=a(343),v=a(381),x=a(5),C=a(379),y=a(380),k=a(223),S=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).state={showPassword:!1,password:""},r}return Object(d.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.isAuthendicated,c=t.loggingIn,i=this.state,o=i.password,s=i.showPassword;return null!=n&&1==n.auth?(console.log("redirect to manager page"),Object(r.jsx)(g.a,{to:"/priceManager"})):Object(r.jsx)("div",{style:{marginTop:"10%",marginBottom:20},children:Object(r.jsxs)(b.a,{className:a.container,elevation:3,children:[Object(r.jsx)("div",{className:a.textContainer,children:Object(r.jsx)("span",{children:" Please Entry Password"})}),Object(r.jsxs)("div",{className:a.passwordContainer,children:[Object(r.jsx)(m.a,{id:"outlined-adornment-password",type:s?"text":"password",value:o,onChange:function(t){return e.setState({password:t.target.value})},endAdornment:Object(r.jsx)(f.a,{position:"end",children:Object(r.jsx)(O.a,{"aria-label":"toggle password visibility",onClick:function(){return e.setState({showPassword:!s})},onMouseDown:function(e){return e.preventDefault()},edge:"end",children:s?Object(r.jsx)(C.a,{}):Object(r.jsx)(y.a,{})})})}),Object(r.jsx)(v.a,{variant:"contained",disabled:c||0==o.trim().length,onClick:function(){return e.tryLogin()},color:"primary",style:{marginLeft:15},children:"Login"})]}),this._renderErrorMessage()]})})}},{key:"tryLogin",value:function(){var e=this.state.password,t=k(e);this.props.login(t)}},{key:"_renderErrorMessage",value:function(){var e=this.props.classes,t=this.props,a=t.loginState,n=t.loggingIn,c="logging in ...";if(a<0&&(c="password is wrong"),a<0||n)return Object(r.jsx)("div",{className:a<0?e.errorMessageContainer:e.successMessageContainer,children:c})}}]),a}(c.a.Component),A=Object(x.a)((function(e){return{container:{width:"70%",margin:"auto",minWidth:400,maxWidth:800,paddingBottom:15},textContainer:{textAlign:"center",color:"white",backgroundColor:"darkblue",padding:10,fontSize:18,fontWeight:600},passwordContainer:{padding:20,display:"flex",alignItems:"center",justifyContent:"center"},errorMessageContainer:{lineHeight:"50px",height:50,color:"red",textAlign:"left",fontSize:18,fontWeight:600,paddingLeft:20},successMessageContainer:{lineHeight:"50px",height:50,color:"green",textAlign:"left",fontSize:18,fontWeight:600}}}),{withTheme:!0})(S),N=a(41),w=a(24),T=Object(N.b)((function(e){return{isAuthendicated:e.mainPageData.isAuthendicated}}),(function(e){return Object(w.b)({},e)}))(A),M=a(72),P=a.n(M),I=a(96),E=a(21),F=a(406),R=a(383),_=a(408),L=a(385),D=a(386),z=a(387),B=a(388),U=a(389),W=a(390),H=a(391),Y=a(405),G=a(396),q=a(27),V=a(382),J=a(56),X=Object(V.a)((function(e){return{navContainer:{height:60,lineHeight:"60px",display:"flex",background:"rgb(248, 248, 248)",borderBottom:"2px solid rgb(231, 231, 231)",width:"100%",padding:10},navLink:{padding:15,textDecoration:"none",color:"#337ab7",borderRadius:5},activeTab:{backgroundColor:"#337ab7",color:"white"}}})),Z=function(e){var t=X(),a=(Object(q.a)(),e.routelist);return Array.isArray(a)?Object(r.jsx)("div",{className:t.navContainer,children:a.map((function(e,n){var c=100/a.length+"%";return Object(r.jsx)("div",{style:{width:c,textAlign:"center"},children:Object(r.jsx)(J.b,{to:"/"+e.path,className:t.navLink,activeClassName:t.activeTab,children:e.pathname})},"topbar"+e.path+n)}))}):Object(r.jsx)("div",{children:Object(r.jsx)("h5",{children:" route list is not array"})})},K=[0,1,2,3,4,5,6,7,8,9,10,11,12],$=[17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40],Q=a(392),ee=a(393),te=a(4),ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).handleClose=function(){(0,r.props.clearError)(),r.setState({successMessage:""})},r.searchContent=function(){var e=r.state,t=e.filter,a=(e.page,e.pageSize),n=e.searchPage;t.length>3&&(r.setState({searching:!0}),r.props.fetchProduct({page:n,pageSize:a,filter:t}))},r.updateFilter=function(e){var t=r.state,a=t.searching,n=t.page,c=t.pageSize;e.target.value.length<3?(a&&r.props.fetchProduct({page:n,pageSize:c}),r.setState({searching:!1,filter:e.target.value})):r.setState({filter:e.target.value})},r.handleRowChange=function(e){var t=r.state.filter,a={page:0,pageSize:e.target.value};t.trim().length>3&&(a.filter=t),r.setState({pageSize:e.target.value,page:0}),r.props.fetchProduct(a)},r.handleChangePage=function(e,t){var a=r.state,n=a.page,c=a.searching,i=a.filter,o=r.props.fetchProduct;if(t==n)console.log("is on current page");else{c?r.setState({searchPage:t}):r.setState({page:t});var s={page:t,pageSize:r.state.pageSize};i.trim().length>3&&(s.filter=i),o(s)}},r.state={page:0,filter:"",editIndex:-1,targetPrice:0,searching:!1,searchPage:0,pageSize:50,successMessage:""},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.state,t=e.page,a=e.filter,r=this.props,n=r.fetchProduct;if(!(r.products.length>0)){var c={page:t,pageSize:this.state.pageSize};a.trim().length>3&&(c.filter=a),n(c)}}}]),Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Z,{routelist:this.props.routelist}),this._renderFilter(),Object(r.jsx)(R.a,{}),this._renderList(),this._renderLoading(),this._renderAlert()]})}},{key:"_renderFilter",value:function(){var e=this.props.classes;return Object(r.jsxs)("div",{className:e.filterContainer,children:[Object(r.jsx)("input",{type:"text",className:e.searchBox,value:this.state.filter,placeholder:"Enter Product Title",onChange:this.updateFilter}),Object(r.jsx)(v.a,{onClick:this.searchContent,variant:"contained",color:"primary",style:{marginLeft:15},"aria-label":"edit",disabled:this.props.loading,children:"\u67e5\u627e "})]})}},{key:"_renderAlert",value:function(){var e=this.props.errorMessage,t=this.state.successMessage,a="";return e.length>0?a=e:t.length>0&&(a=t),Object(r.jsx)(_.a,{autoHideDuration:1700,open:a.length>0,onClose:this.handleClose,TransitionComponent:L.a,children:Object(r.jsx)(F.a,{variant:"filled",severity:t.length>0?"success":"error",style:{padding:"10px 90px",marginBottom:50},children:a})},"slide alert")}},{key:"_renderList",value:function(){var e=this,t=[{title:"#",key:"pid"},{title:"\u4ea7\u54c1\u540d",key:"productTitle"},{title:"\u5e93\u5b58",key:"stockInfo"},{title:"\u5f53\u524d\u4ef7\u683c",key:"currentPrice"},{title:"\u65e7\u4ef7\u683c",key:"oldPrice"},{title:"\u76ee\u6807\u4ef7\u683c",key:"targetPrice",edit:!0}],a=this.props,n=a.classes,c=a.totalCount,i=a.products,o=this.state,s=o.searching,d=o.searchPage,l=o.page;return Object(r.jsxs)(b.a,{children:[Object(r.jsx)(D.a,{children:Object(r.jsxs)(z.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(r.jsx)(B.a,{children:Object(r.jsx)(U.a,{children:t.map((function(e){return Object(r.jsx)(W.a,{align:"center",className:Object(te.a)(Object(E.a)({},n.modifyCell,1==e.edit)),children:e.title},e.key+"-column")}))})}),Object(r.jsx)(H.a,{children:i.map((function(a,n){var c=e.props,i=c.classes,o=c.updating,s=c.loading,d=e.state,l=d.editIndex,u=d.targetPrice;return Object(r.jsx)(U.a,{hover:!0,role:"checkbox",tabIndex:-1,className:i.tableCellFont,children:t.map((function(t,c){var d=e.state,p=d.page,h=d.searching,g=d.searchPage,j=d.pageSize,b=h?g*j:p*j,m=a[t.key];0==c&&(m=b+n+1),t.edit&&(m=null==a[t.key]?0:a[t.key]);var f=t.key+n+"cell"+c;if(t.edit){var v=n!==l;return Object(r.jsxs)(W.a,{align:"center",style:{display:"flex"},children:[Object(r.jsx)("input",{id:"tragerchange-"+n,type:"number",readOnly:!!v,className:i.inputSizing,value:v?m:u,onChange:function(t){return e.setState({targetPrice:t.target.value})}}),0==v?Object(r.jsx)(O.a,{onClick:function(){return e.saveTargetPrice(n,a.pid)},color:"primary","aria-label":"edit",disabled:o||s,children:Object(r.jsx)(Q.a,{})}):Object(r.jsx)(O.a,{onClick:function(){return e.changeModifyIndex(n,a[t.key])},color:"primary",disabled:o||s,"aria-label":"edit",children:Object(r.jsx)(ee.a,{})})]},f)}var x="";return"currentPrice"===t.key&&(a.currentPrice<a.oldPrice&&a.currentPrice>0&&(x="orange"),a.currentPrice>0&&a.targetPrice&&a.currentPrice<=a.targetPrice&&(x="green")),Object(r.jsx)(W.a,{align:"productTitle"===t.key?"left":"center",className:Object(te.a)(i.cellFont,Object(E.a)({},i.titleFont,"productTitle"===t.key)),children:"productTitle"===t.key?Object(r.jsx)("a",{style:{textDecoration:"none",color:"black"},href:a.productInfoUrl,target:"_blank",children:m}):Object(r.jsx)("span",{style:x.length>0?{color:x,fontWeight:600}:{},children:m})},f)}))},"row"+n)}))})]})}),Object(r.jsx)(Y.a,{component:"div",count:c,rowsPerPage:this.state.pageSize,page:s?d:l,onChangePage:this.handleChangePage,onChangeRowsPerPage:this.handleRowChange})]})}},{key:"_renderLoading",value:function(){var e=this.props,t=e.loading,a=e.classes;e.updating;if(t)return Object(r.jsx)("div",{className:a.loadingContainer,children:Object(r.jsx)(G.a,{color:"primary",size:80})})}},{key:"changeModifyIndex",value:function(e,t){this.setState({targetPrice:null==t?0:t,editIndex:e})}},{key:"saveTargetPrice",value:function(){var e=Object(I.a)(P.a.mark((function e(t,a){var r,n,c,i;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.props,n=r.products,c=r.updateTargetPrice,i=this.state.targetPrice,e.next=4,c(i,a);case 4:0==this.props.errorMessage.length&&(n[t].targetPrice=i,this.setState({successMessage:"\u66f4\u65b0\u6210\u529f"})),this.setState({editIndex:-1,targetPrice:0});case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(c.a.Component),re=Object(x.a)((function(e){return{modifyCell:{minWidth:200},inputSizing:{height:32,textAlign:"center"},cellFont:{fontSize:16},titleFont:{fontWeight:600},loadingContainer:{position:"fixed",width:"100%",height:100,top:"45%",textAlign:"center"},filterContainer:{padding:"5px 20px",marginBottom:15,marginTop:15},searchBox:{height:30,width:"40%",paddingLeft:15}}}),{withTheme:!0})(ae),ne="priceManager/repo/manager/price/FETCH_PRODUCTS",ce="priceManager/repo/manager/price/FETCH_PRODUCTS_SUCCESS",ie="priceManager/repo/manager/price/FETCH_PRODUCTS_FAIL",oe="priceManager/repo/manager/price/UPDATE_TARGETPRICE",se="priceManager/repo/manager/price/UPDATE_TARGETPRICE_SUCCESS",de="priceManager/repo/manager/price/UPDATE_TARGETPRICE_FAIL",le="priceManager/repo/manager/price/CLEAR_ERROR",ue={products:[],loading:!1,totalCount:0,updating:!1,errorMessage:""};function pe(e){return{type:ne,payload:{request:{method:"POST",url:"/priceManager/fetchProduct",data:{condition:e}}}}}function he(e,t){return{type:oe,payload:{request:{method:"POST",url:"/priceManager/changeTargetPrice",data:{pid:t,targetPrice:e}}}}}function ge(){return{type:le}}var je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ne:return Object(p.a)(Object(p.a)({},e),{},{loading:!0});case ce:return Object(p.a)(Object(p.a)({},e),{},{loading:!1,products:t.payload.data.data,totalCount:t.payload.data.totalCount});case ie:return console.log("fail to load products"),Object(p.a)(Object(p.a)({},e),{},{loading:!1});case oe:return Object(p.a)(Object(p.a)({},e),{},{updating:!0,errorMessage:""});case se:return Object(p.a)(Object(p.a)({},e),{},{updating:!1});case de:return console.log("unable to update the price"),Object(p.a)(Object(p.a)({},e),{},{updating:!1,errorMessage:"\u66f4\u65b0\u9519\u8bef"});case le:return Object(p.a)(Object(p.a)({},e),{},{errorMessage:""});default:return e}},be=Object(N.b)((function(e){return{isAuthendicated:e.mainPageData.isAuthendicated,products:e.priceManagerData.products,loading:e.priceManagerData.loading,totalCount:e.priceManagerData.totalCount,updating:e.priceManagerData.updating,errorMessage:e.priceManagerData.errorMessage}}),(function(e){return Object(w.b)({fetchProduct:pe,updateTargetPrice:he,clearError:ge},e)}))(re),me=a(101),fe=a(409),Oe=a(397),ve=a(398),xe=a(412),Ce=a(400),ye=a(413),ke=a(404),Se=a(414),Ae=a(341),Ne=a(410),we=a(401),Te=a(342),Me=a(403),Pe=a(399),Ie=a(402),Ee=a(37),Fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r,n;return Object(s.a)(this,a),(n=t.call(this,e)).closeModal=function(){var e;n.setState({modalopen:!1,currentUpdate:(e={owner:"",email:""},Object(E.a)(e,"owner",""),Object(E.a)(e,"note",""),Object(E.a)(e,"cards",[]),Object(E.a)(e,"active",0),e),tempCard:[],modifyCard:!1,modifyCardError:"",modifyAccountError:"",openFeedBack:!1})},n.saveCardInfo=function(){for(var e=n.state.tempCard,t="",a=0;a<e.length;a++){var r=e[a],c=r["card.cardNumber"]?r["card.cardNumber"]+"":"",i=r["card.cvv"]?r["card.cvv"]+"":"";if(c.length<15){t="Invalid Card Number on card # "+(a+1);break}if(i.length<3){t="Invalid Card CVV on card # "+(a+1);break}if(!r["card.cardFirstName"]||0==r["card.cardFirstName"].trim().length){t="Invalid Card First Name on card # "+(a+1);break}if(!r["card.cardLastName"]||0==r["card.cardLastName"].trim().length){t="Invalid Card Last Name on card # "+(a+1);break}if(!r["card.expireMonth"]||r["card.expireMonth"]<1||r["card.expireMonth"]>12){t="Invalid Card Expire Month on card # "+(a+1);break}if(!r["card.expireYear"]||r["card.expireYear"]<20){t="Invalid Card Expire Year on card # "+(a+1);break}}if(t.length>0)console.log("some error occur"),n.setState({modifyCardError:t});else{var o=n.state.currentUpdate;o.cards=n.deepcopyCards(e),n.setState({modifyCard:!1,modifyCardError:"",currentUpdate:Object(p.a)({},o),tempCard:[]})}},n.addCard=function(){var e=n.state.tempCard,t=1e5*Math.random();e.push({"card.cardNumber":null,"card.cvv":null,"card.cardFirstName":"","card.cardLastName":"","card.expireYear":null,"card.expireMonth":null,random:t}),n.setState({tempCard:Object(me.a)(e)})},n.state={modalopen:!1,currentUpdate:(r={owner:"",email:""},Object(E.a)(r,"owner",""),Object(E.a)(r,"cards",[]),Object(E.a)(r,"active",0),r),modifyCardError:"",tempCard:[],modifyCard:!1,modifyAccountError:"",openFeedBack:!1},n}return Object(d.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchAccount)()}}]),Object(d.a)(a,[{key:"render",value:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Z,{routelist:this.props.routelist}),this._renderAccountList(),this._renderModifier()]})}},{key:"_renderAccountList",value:function(){var e=this,t=this.props,a=t.accounts,n=t.classes;return Object(r.jsxs)("div",{className:n.paperContainer,children:[Object(r.jsx)(v.a,{disabled:this.props.updating,variant:"contained",color:"primary",style:{margin:"20px 0"},onClick:function(){return e.setState({modalopen:!0})},children:"Add Account"}),Object(r.jsx)(b.a,{children:Object(r.jsx)(z.a,{className:n.optionTable,children:Object(r.jsx)(D.a,{children:Object(r.jsxs)(z.a,{stickyHeader:!0,"aria-label":"sticky table",children:[Object(r.jsx)(B.a,{children:Object(r.jsx)(U.a,{children:["#","Account Info","Cards","Order Records","Notes","Status","Action"].map((function(e,t){return Object(r.jsx)(W.a,{className:n.tableCell,align:"left",style:{fontWeight:600},children:e},e+"-column"+t)}))})}),Object(r.jsx)(H.a,{children:a.map((function(t,a){return Object(r.jsxs)(U.a,{children:[Object(r.jsx)(W.a,{align:"left",className:n.tableCell,style:{width:"5%"},children:a+1}),Object(r.jsxs)(W.a,{align:"left",className:n.tableCell,style:{width:"15%"},children:[Object(r.jsx)("span",{children:t.owner}),t.email?Object(r.jsx)("br",{}):Object(r.jsx)("span",{}),Object(r.jsx)("span",{children:t.email}),Object(r.jsx)("br",{})]}),Object(r.jsx)(W.a,{align:"left",className:n.tableCell,style:{width:"25%"},children:e._renderCardInfo(t.cards)}),Object(r.jsx)(W.a,{align:"left",className:n.tableCell,style:{width:"30%"},children:e._renderRecordInfo(t.records)}),Object(r.jsx)(W.a,{align:"left",className:n.tableCell,style:{width:"7%"},children:t.note}),Object(r.jsx)(W.a,{align:"left",className:n.tableCell,style:{width:"8%"},children:0==t.active?Object(r.jsx)("span",{className:n.suspendText,children:"Suspended"}):Object(r.jsx)("span",{className:n.activeText,children:"Ready"})}),Object(r.jsx)(W.a,{align:"left",className:n.tableCell,style:{width:"10%"},children:Object(r.jsx)(v.a,{variant:"contained",color:"primary",disabled:e.props.updating,style:{marginTop:5,padding:5,marginBottom:5},onClick:function(){return e.setState({modalopen:!0,currentUpdate:e.deepcopyAccount(t)})},children:"Edit"})})]},t.accountId+"-accountIndex")}))})]})})})})]})}},{key:"_renderModifier",value:function(){var e=this.state,t=e.modalopen,a=e.currentUpdate,n=e.modifyCard,c=(this.props.classes,null==a.accountId?"\u6dfb\u52a0\u8d26\u6237\u4fe1\u606f":"\u66f4\u65b0\u8d26\u6237\u4fe1\u606f");return n&&(c="\u66f4\u65b0\u4fe1\u7528\u5361\u4fe1\u606f"),Object(r.jsxs)(fe.a,{onClose:this.closeModal,"aria-labelledby":"customized-dialog-title",open:t,TransitionComponent:L.a,maxWidth:!1,disableBackdropClick:!0,disableEscapeKeyDown:!0,children:[Object(r.jsx)("h2",{id:"customized-dialog-title",style:{textAlign:"center"},children:c}),Object(r.jsx)(R.a,{}),Object(r.jsxs)(Oe.a,{style:{padding:"20px 10px",minWidth:600,position:"relative"},children:[this._renderFeedBack(),Object(r.jsx)("div",{style:{width:"90%",margin:"auto"},children:!0===n?this.renderCardModifier():this.renderAccountModifer(a)})]}),Object(r.jsx)(R.a,{}),Object(r.jsxs)(ve.a,{style:{position:"relative"},children:[this.renderCardError(),!0===n?this.renderCardAction():this.renderAccountAction(a)]})]})}},{key:"_renderFeedBack",value:function(){var e=this,t=this.props,a=t.classes,n=t.updating,c=t.upsertSuccess;if(!1!==this.state.openFeedBack){var i="red";n&&(i="white"),1==c.status&&(i="limegreen");var o=c.status?"Operation Successed!":c.message;return Object(r.jsx)("div",{className:a.feedbackContainer,children:Object(r.jsxs)("div",{className:a.feedbackContentContainer,style:{backgroundColor:i},children:[n?Object(r.jsx)("div",{}):Object(r.jsx)("div",{className:a.closeFeedBack,onClick:function(){return e.setState({openFeedBack:!1})},children:"x"}),n?Object(r.jsx)(G.a,{color:"primary",size:60}):Object(r.jsxs)("span",{children:[" ",o," "]})]})})}}},{key:"renderCardError",value:function(){var e=this.state,t=e.modifyCard,a=e.modifyCardError,n=e.modifyAccountError,c=this.props.classes;return!0===t&&a.length>0?Object(r.jsx)("div",{className:c.errorContainer,children:a}):!1===t&&n.length>0?Object(r.jsx)("div",{className:c.errorContainer,children:n}):void 0}},{key:"renderAccountAction",value:function(e){var t=this;return Object(r.jsxs)("div",{children:[Object(r.jsx)(v.a,{autoFocus:!0,onClick:function(){return t.updateAccountInfo()},variant:"contained",color:"primary",disabled:this.props.updating,style:{marginRight:8},children:e.accountId?"\u66f4\u65b0":"\u6dfb\u52a0"}),Object(r.jsx)(v.a,{onClick:this.closeModal,variant:"contained",color:"secondary",disabled:this.props.updating,style:{marginRight:15},children:"\u5173\u95ed"})]})}},{key:"renderCardAction",value:function(){var e=this;return Object(r.jsxs)("div",{children:[Object(r.jsx)(v.a,{autoFocus:!0,variant:"contained",color:"primary",style:{marginRight:8},disabled:this.props.updating,onClick:this.saveCardInfo,children:"\u786e\u5b9a"}),Object(r.jsx)(v.a,{disabled:this.props.updating,onClick:function(){return e.setState({modifyCard:!1,tempCard:[],modifyCardError:""})},variant:"contained",color:"secondary",style:{marginRight:15},children:"\u8fd4\u56de"})]})}},{key:"renderCardModifier",value:function(){var e=this,t=this.state.tempCard,a=this.props.classes;return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{style:{marginBottom:20},children:Object(r.jsx)(v.a,{color:"primary",variant:"contained",onClick:this.addCard,disabled:this.props.updating,children:"\u6dfb\u52a0\u65b0\u5361"})}),t.map((function(t,n){var c=t.random?t.random:t["card.cardId"];return Object(r.jsxs)(b.a,{className:a.cardModifierContainer,elevation:3,children:[Object(r.jsx)("div",{className:a.removeButton,children:Object(r.jsx)(O.a,{onClick:function(){return e.removeCard(n)},children:Object(r.jsx)(Pe.a,{color:"secondary"})})}),Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{label:"#"+(n+1)+" - \u5361\u53f7",className:a.cardInputContainer,style:{minWidth:350},value:t["card.cardNumber"],type:"number",onChange:function(t){return e.updateTempCard(t.target.value,n,"card.cardNumber")}})}),Object(r.jsx)("div",{children:Object(r.jsx)(xe.a,{label:"CVV",type:"number",className:a.cardInputContainer,value:t["card.cvv"],onChange:function(t){return e.updateTempCard(t.target.value,n,"card.cvv")}})}),Object(r.jsxs)("div",{children:[Object(r.jsx)(xe.a,{label:"First Name",className:a.cardInputContainer,value:t["card.cardFirstName"],onChange:function(t){return e.updateTempCard(t.target.value,n,"card.cardFirstName")}}),Object(r.jsx)(xe.a,{label:"Last Name",className:a.cardInputContainer,value:t["card.cardLastName"],onChange:function(t){return e.updateTempCard(t.target.value,n,"card.cardLastName")}})]}),Object(r.jsxs)(Ce.a,{style:{marginRight:20,marginBottom:20},children:[Object(r.jsx)(ye.a,{id:"select-month"+n,children:"Month*"}),Object(r.jsx)(ke.a,{inputProps:{name:"month"+n,id:"month-selector"+n},value:t["card.expireMonth"],native:!0,onChange:function(t){return e.updateTempCard(t.target.value,n,"card.expireMonth")},children:K.map((function(e){return Object(r.jsx)("option",{value:e,children:e},"month-option"+e)}))})]}),Object(r.jsxs)(Ce.a,{children:[Object(r.jsx)(ye.a,{id:"select-year"+n,children:"YEAR*"}),Object(r.jsx)(ke.a,{inputProps:{name:"year"+n,id:"year-selector"+n},value:t["card.expireYear"],native:!0,onChange:function(t){return e.updateTempCard(t.target.value,n,"card.expireYear")},children:$.map((function(e){return Object(r.jsx)("option",{value:e,children:e},"year-option"+e)}))})]})]},"cardModifier"+n+c)}))]})}},{key:"renderAccountModifer",value:function(e){var t=this,a=this.props.classes;return Object(r.jsxs)("div",{style:{position:"relative"},children:[Object(r.jsxs)("div",{className:a.statusControl,children:[0==e.active?Object(r.jsx)("span",{className:a.suspendText,children:"Susupended"}):Object(r.jsx)("span",{className:a.activeText,children:"Ready"}),Object(r.jsx)(Se.a,{checked:1==e.active,onChange:function(e){return t.setAccountInfo(e.target.checked?1:0,"active")},color:"primary",name:"accountStatus",inputProps:{"aria-label":"primary checkbox"}})]}),Object(r.jsx)("div",{style:{marginBottom:15},children:Object(r.jsx)(xe.a,{label:"\u8d26\u53f7\u540d *",style:{width:"60%",minWidth:300},value:e.owner,onChange:function(e){return t.setAccountInfo(e.target.value,"owner")}})}),Object(r.jsx)("div",{style:{marginBottom:15},children:Object(r.jsx)(xe.a,{style:{width:"60%",minWidth:300},label:"\u90ae\u7bb1\u53f7",value:e.email,onChange:function(e){return t.setAccountInfo(e.target.value,"email")}})}),Object(r.jsx)("div",{style:{marginBottom:15},children:Object(r.jsx)(Ae.a,{style:{width:"60%",minWidth:300,resize:"vertical"},"aria-label":"minimum height",rowsMin:3,placeholder:"Please Give Some Note",value:e.note,onChange:function(e){return t.setAccountInfo(e.target.value,"note")}})}),Object(r.jsx)("h3",{style:{display:"inline-block"},children:"\u5361\u53f7\u4fe1\u606f"}),Object(r.jsx)(v.a,{variant:"contained",color:"primary",disabled:this.props.updating,style:{marginLeft:20},onClick:function(){return t.setState({modifyCard:!0,display:"inline-block",tempCard:t.deepcopyCards(e.cards)})},children:"\u6dfb\u52a0 / \u66f4\u65b0"}),this._renderCardInfo(e.cards)]})}},{key:"_renderCardInfo",value:function(e){var t=this;if(e&&Array.isArray(e))return Object(r.jsx)("div",{children:e.map((function(e,a){var n=t.props.classes;return Object(r.jsxs)(Ne.a,{style:{marginTop:10,marginBottom:10},children:[Object(r.jsx)(we.a,{className:n.accordionHeader,expandIcon:Object(r.jsx)(Ie.a,{style:{color:"white"}}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(r.jsx)(Te.a,{children:"Card "+(a+1)})}),Object(r.jsx)(Me.a,{style:{backgroundColor:"#ddd"},children:Object(r.jsxs)(Te.a,{children:[Object(r.jsx)("span",{style:{fontWeight:600},children:"Card Number: "}),e["card.cardNumber"],Object(r.jsx)("br",{}),Object(r.jsx)("span",{style:{fontWeight:600},children:"CCV: "}),"***",Object(r.jsx)("br",{}),Object(r.jsx)("span",{style:{fontWeight:600},children:"Name on Card: "}),e["card.cardFirstName"]+" "+e["card.cardLastName"],Object(r.jsx)("br",{}),Object(r.jsx)("span",{style:{fontWeight:600},children:"Expire: "}),e["card.expireMonth"]+"/"+e["card.expireYear"]]})})]},"card"+e.cardId)}))})}},{key:"_renderRecordInfo",value:function(e){var t=this,a=this.props.classes;return Object(r.jsx)("div",{children:e.map((function(e,n){var c=t.getDate(e.updatedAt),i=t.getTime(e.updatedAt);return Object(r.jsxs)("div",{style:{fontSize:12},children:[Object(r.jsx)("span",{children:"["+c+" "+i+"]"}),0==e.result?Object(r.jsx)("span",{className:a.successText,children:"Successed"}):Object(r.jsx)("span",{className:a.failText,children:"Failed"}),Object(r.jsx)("br",{}),Object(r.jsx)("div",{className:a.productTitleContainer,children:Object(r.jsx)("pre",{className:a.productTitle,children:e["product.productTitle"]})})]},"record"+e.recordId)}))})}},{key:"updateAccountInfo",value:function(){var e=Object(I.a)(P.a.mark((function e(){var t,a,r,n,c,i,o;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.state.currentUpdate).owner&&0!=t.owner.trim().length){e.next=3;break}return e.abrupt("return",this.setState({modifyAccountError:"\u7528\u6237\u540d\u4e0d\u80fd\u4e3a\u7a7a"}));case 3:if(!(t.email.length>0)){e.next=6;break}if(Object(Ee.c)(t.email)){e.next=6;break}return e.abrupt("return",this.setState({modifyAccountError:"\u90ae\u7bb1\u683c\u5f0f\u4e0d\u6b63\u786e"}));case 6:return a=this.getEncryptAccount(t),r=this.props.upsertAccountInformation,this.setState({openFeedBack:!0}),e.next=11,r(a);case 11:n=this.props,c=n.upsertSuccess,i=n.fetchAccount,1==c.status&&(i(),this.setState({currentUpdate:(o={owner:"",email:""},Object(E.a)(o,"owner",""),Object(E.a)(o,"note",""),Object(E.a)(o,"cards",[]),Object(E.a)(o,"active",0),o),tempCard:[],modifyCard:!1,modifyCardError:"",modifyAccountError:""}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getEncryptAccount",value:function(e){if(null==e)return e;for(var t=Object(p.a)(Object(p.a)({},e),{},{cards:[]}),a=0;a<e.cards.length;a++){var r=e.cards[a],n=Object(p.a)(Object(p.a)({},r),{},{"card.cardNumber":Object(Ee.b)(r["card.cardNumber"]),"card.cvv":Object(Ee.b)(r["card.cvv"]),"card.cardFirstName":Object(Ee.b)(r["card.cardFirstName"]),"card.cardLastName":Object(Ee.b)(r["card.cardLastName"])});t.cards.push(n)}return t}},{key:"deepcopyAccount",value:function(e){if(!e||!e.accountId)return e;for(var t=Object(p.a)(Object(p.a)({},e),{},{cards:[]}),a=0;a<e.cards.length;a++)t.cards.push(Object(p.a)({},e.cards[a]));return t}},{key:"deepcopyCards",value:function(e){if(!e||!Array.isArray(e))return e;var t=[];return e.forEach((function(e,a){t.push(Object(p.a)({},e))})),t}},{key:"updateTempCard",value:function(e,t,a){var r=this.state.tempCard;r[t][a]=e,this.setState({tempCard:Object(me.a)(r)})}},{key:"removeCard",value:function(e){var t=this.state.tempCard;t.splice(e,1),this.setState({tempCard:Object(me.a)(t)})}},{key:"getDate",value:function(e){if(!e||e.length<10)return"";var t="";return(t+=e.substring(0,10)).replace(/-/g,"/")}},{key:"getTime",value:function(e){return!e||e.length<24?"":e.substring(11,16)}},{key:"setAccountInfo",value:function(e,t){var a=this.state.currentUpdate;a[t]=e,this.setState({curretnUpdate:Object(p.a)({},a)})}}]),a}(c.a.Component),Re=Object(x.a)((function(e){return{paperContainer:{width:"94%",margin:"auto",marginTop:10,marginBottom:10},cardModifierContainer:{padding:20,marginBottom:20,position:"relative"},suspendText:{padding:"5px 6px",borderRadius:4,fontSize:12,color:"white",backgroundColor:"grey"},activeText:{padding:"5px 6px",borderRadius:4,fontSize:12,color:"white",backgroundColor:"#3f51b5"},successText:{padding:"2px 6px",backgroundColor:"limegreen",color:"white",borderRadius:4,marginLeft:7},failText:{padding:"2px 6px",backgroundColor:"red",color:"white",borderRadius:4,marginLeft:7},tableCell:{borderLeft:"1px solid #ddd",padding:"2px 10px",verticalAlign:"text-top"},optionTable:{width:"100%",borderCollapse:"collapse"},productTitleContainer:{overflow:"hidden",maxWidth:300,fontWeight:600,height:26,lineHeight:"14px",marginLeft:10,marginTop:-5,marginBottom:10},productTitle:{width:"100%",overflowX:"scroll",overflowY:"hidden"},accordionHeader:{backgroundColor:"limegreen",color:"white",minHeight:"35px",height:35},statusControl:{position:"absolute",top:0,right:0},cardInputContainer:{width:"30%",minWidth:200,marginRight:20,marginBottom:15},removeButton:{position:"absolute",top:0,right:0},errorContainer:{position:"absolute",top:0,left:0,width:"70%",paddingLeft:20,fontSize:18,height:46,lineHeight:"46px",color:"red"},feedbackContainer:{position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999,backgroundColor:"rgba(0,0,0,0.8)",display:"flex"},feedbackContentContainer:{width:200,height:120,fontWeight:600,margin:"auto",justifyContent:"center",color:"white",backgroundColor:"limegreen",borderRadius:6,textAlign:"center",display:"flex",alignItems:"center",position:"relative"},closeFeedBack:{position:"absolute",cursor:"pointer",top:-8,right:-8,zIndex:1e4,backgroundColor:"#ddd",color:"red",fontWeight:700,width:16,height:16,lineHeight:"11px",textAlign:"center",borderRadius:"50%"}}}),{withTheme:!0})(Fe),_e="accountManager/repo/manager/account/FETCH_ACCOUNT",Le="accountManager/repo/manager/account/FETCH_ACCOUNT_SUCCESS",De="accountManager/repo/manager/account/FETCH_ACCOUNT_FAIL",ze="accountManager/repo/manager/account/UPSERT_ACCOUNT",Be="accountManager/repo/manager/account/UPSERT_ACCOUNT_SUCCESS",Ue="accountManager/repo/manager/account/UPSERT_ACCOUNT_FAIL",We={loadingAccount:!1,accounts:[],upsertSuccess:{status:!1,message:""},updating:!1};function He(){return{type:_e,payload:{request:{method:"GET",url:"/accountManager/fetchAccount"}}}}function Ye(e){return{type:ze,function:Ee.a,payload:{request:{method:"POST",url:"/accountManager/upsertAccount",data:{data:e}}}}}var Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _e:return Object(p.a)(Object(p.a)({},e),{},{loadingAccount:!0});case Le:var a=t.payload.data.data;return a.forEach((function(e,t){e.cards.forEach((function(e,t){e["card.cardFirstName"]=Object(Ee.a)(e["card.cardFirstName"]),e["card.cardNumber"]=Object(Ee.a)(e["card.cardNumber"]),e["card.cvv"]=Object(Ee.a)(e["card.cvv"]),e["card.cardLastName"]=Object(Ee.a)(e["card.cardLastName"])}))})),Object(p.a)(Object(p.a)({},e),{},{loadingAccount:!1,accounts:a});case De:return Object(p.a)(Object(p.a)({},e),{},{loadingAccount:!1});case ze:return Object(p.a)(Object(p.a)({},e),{},{updating:!0,upsertSuccess:{status:!1,message:""}});case Be:return Object(p.a)(Object(p.a)({},e),{},{updating:!1,upsertSuccess:{status:!0,message:""}});case Ue:var r="Failed to update with unknow issues, please try again";return t.error&&t.error.response&&t.error.response.data&&(r=t.error.response.data.message),Object(p.a)(Object(p.a)({},e),{},{updating:!1,upsertSuccess:{status:!1,message:r}});default:return e}},qe=Object(N.b)((function(e){return{isAuthendicated:e.mainPageData.isAuthendicated,loadingAccount:e.accountManagerData.loadingAccount,accounts:e.accountManagerData.accounts,updating:e.accountManagerData.updating,upsertSuccess:e.accountManagerData.upsertSuccess}}),(function(e){return Object(w.b)({fetchAccount:He,upsertAccountInformation:Ye},e)}))(Re),Ve=[{path:"priceManager",pathname:"\u76ee\u6807\u4ef7\u683c\u7ba1\u7406",component:"PriceManager"},{path:"accountManager",pathname:"\u8d26\u6237\u7ba1\u7406",component:"AccountManager"}],Je=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(s.a)(this,a),(r=t.call(this,e)).state={},r}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.isAuthendicated,a=e.expire;if(null==t)a();else if(null!=t&&null!=t.expireTime){var r=(new Date).getTime();if(t.expireTime<=r)(0,this.props.expire)()}}}]),Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=e.isAuthendicated,a=e.login,n=(e.expire,e.loggingIn),c=e.loginState;return Object(r.jsxs)(g.d,{children:[Ve.map((function(e,a){return Object(r.jsx)(j,{path:"/"+e.path,component:Xe[e.component],isAuthendicated:t,routelist:Ve},e.component+"-"+a)})),Object(r.jsx)(g.b,{path:"/",exact:!0,render:function(e){return Object(r.jsx)(T,{isAuthendicated:t,login:a,loggingIn:n,loginState:c})}})]})}}]),a}(c.a.Component),Xe={PriceManager:be,AccountManager:qe},Ze="priceManager/repo/authendication/login/LOGIN",Ke="priceManager/repo/authendication/login/LOGIN_SUCCESS",$e="priceManager/repo/authendication/login/LOGIN_FAIL",Qe="priceManager/repo/authendication/login/EXPIRE",et={isAuthendicated:JSON.parse(localStorage.getItem("authendicated"))||null,loggingIn:!1,loginState:0};function tt(e){return{type:Ze,payload:{request:{method:"POST",url:"/authendication/login",data:{password:e}}}}}function at(){return{type:Qe}}var rt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze:return Object(p.a)(Object(p.a)({},e),{},{loggingIn:!0});case Ke:var a=(new Date).getTime(),r=72e5,n={auth:!0,expireTime:a+r};return localStorage.setItem("authendicated",JSON.stringify(n)),Object(p.a)(Object(p.a)({},e),{},{isAuthendicated:n,loggingIn:!1,loginState:1});case $e:return Object(p.a)(Object(p.a)({},e),{},{loggingIn:!1,loginState:-1});case Qe:return localStorage.setItem("authendicated",null),Object(p.a)(Object(p.a)({},e),{},{isAuthendicated:null});default:return e}},nt=Object(N.b)((function(e){return{isAuthendicated:e.mainPageData.isAuthendicated,loggingIn:e.mainPageData.loggingIn,loginState:e.mainPageData.loginState}}),(function(e){return Object(w.b)({login:tt,expire:at},e)}))(Je),ct=a(197),it=a.n(ct),ot=a(133),st={mainPageData:rt,priceManagerData:je,accountManagerData:Ge},dt=ot.outerReducer(Object(w.c)(Object(p.a)(Object(p.a)({},st),{},{asyncInitialState:ot.innerReducer}))),lt=a(198),ut=a.n(lt).a.create({baseURL:"http://45.79.90.162:8887/api",responseType:"json"}),pt=Object(w.d)(dt,Object(w.a)(it()(ut)));var ht=function(){return console.log("app is activated"),Object(r.jsx)("div",{style:{height:"100%",margin:0,overflowX:"hidden"},children:Object(r.jsx)(J.a,{basename:window.location.pathname||"",children:Object(r.jsx)(N.a,{store:pt,children:Object(r.jsx)(nt,{})})})})},gt=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,415)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),r(e),n(e),c(e),i(e)}))};o.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(ht,{})}),document.getElementById("root")),gt()},37:function(e,t,a){"use strict";(function(e){a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return i}));var r=a(230);function n(e){if("string"!=typeof e||0==e.trim().length)return!1;return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,6}$/.test(e)}function c(t){var a=r.randomBytes(16),n=r.createCipheriv("aes-256-ctr","vOVH6sdmpNWjRRIqCc7rdxs01lwHzfr3",a),c=e.concat([n.update(t),n.final()]);return{iv:a.toString("hex"),content:c.toString("hex")}}function i(t){var a=r.createDecipheriv("aes-256-ctr","vOVH6sdmpNWjRRIqCc7rdxs01lwHzfr3",e.from(t.iv,"hex"));return e.concat([a.update(e.from(t.content,"hex")),a.final()]).toString()}}).call(this,a(20).Buffer)}},[[340,1,2]]]);
//# sourceMappingURL=main.7cdcf457.chunk.js.map